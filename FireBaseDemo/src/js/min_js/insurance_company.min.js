import{initializeApp}from"https://www.gstatic.com/firebasejs/9.8.3/firebase-app.js";import{getAnalytics}from"https://www.gstatic.com/firebasejs/9.8.3/firebase-analytics.js";const firebaseConfig={apiKey:"AIzaSyDtTxfCIJIfPTEw44Ah5I1lpjiDO96FlJM",authDomain:"mydatabase-8f225.firebaseapp.com",databaseURL:"https://mydatabase-8f225-default-rtdb.firebaseio.com",projectId:"mydatabase-8f225",storageBucket:"mydatabase-8f225.appspot.com",messagingSenderId:"68532714578",appId:"1:68532714578:web:fc038b336827906b65338b",measurementId:"G-68RXLWEXS7"};firebase.initializeApp(firebaseConfig);var db=firebase.database();const TaiwanLife=[],CathayLife=[],NanshanLife=[],ChinaLife=[],NAN=[];var users_id,user_id,data,count=1;function getCookie(e){const t=`; ${document.cookie}`.split(`; ${e}=`);if(2===t.length)return t.pop().split(";").shift()}function delCookie(e){var t=new Date;t.setTime(t.getTime()-1);var a=getCookie(e);null!=a&&(document.cookie=e+"="+a+";expires="+t.toGMTString())}null==getCookie("CompanyName")&&(alert("請先登入再前往本頁面!"),window.location="insuranceCompany_login.html");var logout_btn=document.querySelector(".logout_btn");logout_btn.addEventListener("click",(e=>{delCookie("CompanyName"),document.cookie="LoginStatus=No",window.location="insuranceCompany_login.html"})),db.ref("/InsuranceCompany/"+getCookie("CompanyName")).once("value",(function(e){data=e.val(),document.querySelector(".companyName").innerHTML=data.CompanyName})),db.ref("/Users").once("value",(function(e){data=e.val(),(users_id=Object.keys(data)).forEach((e=>{switch(String(data[e].insuranceCompany.name)){case"Nan Shan Life":user_id=String(e),data[e].user_id=user_id,NanshanLife.push(data[e]);break;case"China Life":user_id=String(e),data[e].user_id=user_id,ChinaLife.push(data[e]);break;case"Taiwan Life":user_id=String(e),data[e].user_id=user_id,TaiwanLife.push(data[e]);break;case"Cathay Life":user_id=String(e),data[e].user_id=user_id,CathayLife.push(data[e]);break;default:user_id=String(e),data[e].user_id=user_id,NAN.push(data[e]);break}}));var t,a=document.querySelector("tbody.customer-table-tbody");NanshanLife.forEach((e=>{t='<tr>\n                        <td class="customer_number">'+Number(count)+'</td>\n                        <td class="customer_name">'+e.realName+'</td>\n                        <td class="customer_gender">'+e.gender+'</td>\n                        <td class="customer_birth">'+e.birthDate+'</td>\n                        <td class="customer_detail"><a href="#" id="user_info_'+e.user_id+'" class="user_info">點擊查看</a></td>\n                    </tr>',a.innerHTML+=t,count++})),ChinaLife.forEach((e=>{t='<tr>\n                        <td class="customer_number">'+Number(count)+'</td>\n                        <td class="customer_name">'+e.realName+'</td>\n                        <td class="customer_gender">'+e.gender+'</td>\n                        <td class="customer_birth">'+e.birthDate+'</td>\n                        <td class="customer_detail"><a href="#" id="user_info_'+e.user_id+'" class="user_info">點擊查看</a></td>\n                    </tr>',a.innerHTML+=t,count++})),TaiwanLife.forEach((e=>{t='<tr>\n                        <td class="customer_number">'+Number(count)+'</td>\n                        <td class="customer_name">'+e.realName+'</td>\n                        <td class="customer_gender">'+e.gender+'</td>\n                        <td class="customer_birth">'+e.birthDate+'</td>\n                        <td class="customer_detail"><a href="#" id="user_info_'+e.user_id+'" class="user_info">點擊查看</a></td>\n                    </tr>',a.innerHTML+=t,count++})),CathayLife.forEach((e=>{t='<tr>\n                        <td class="customer_number">'+Number(count)+'</td>\n                        <td class="customer_name">'+e.realName+'</td>\n                        <td class="customer_gender">'+e.gender+'</td>\n                        <td class="customer_birth">'+e.birthDate+'</td>\n                        <td class="customer_detail"><a href="#" id="user_info_'+e.user_id+'" class="user_info">點擊查看</a></td>\n                    </tr>',a.innerHTML+=t,count++})),NAN.forEach((e=>{t='<tr>\n                        <td class="customer_number">'+Number(count)+'</td>\n                        <td class="customer_name">'+e.realName+'</td>\n                        <td class="customer_gender">'+e.gender+'</td>\n                        <td class="customer_birth">'+e.birthDate+'</td>\n                        <td class="customer_detail"><a href="#" id="user_info_'+e.user_id+'" class="user_info">點擊查看</a></td>\n                    </tr>',a.innerHTML+=t,count++})),Number(count-1)==Object.keys(data).length&&(document.querySelectorAll("a.user_info").forEach((e=>{e.addEventListener("click",(e=>{null!=getCookie("uid")&&delCookie("uid"),document.cookie="uid="+String(e.target.id).substring(10),window.location="insuranceCompany_UserProfile.html"}))})),$(".loader-wrapper").fadeOut("slow"))}));